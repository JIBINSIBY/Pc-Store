(function($){"use strict";$.gridSlider=function(element,options){var _=this,defaults={selector:".grid-slider",IntersectionObserver:!1},$element=$(element);_.settings={},_.init=function(){_.settings=$.extend({},defaults,options),_._initSlider()},_.uniqid=function(length){length=length||10;for(var result="",characters="abcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result},_._initSlider=function(){var settings=_.settings,useIntersectionObserver=settings.IntersectionObserver,$head=$("head"),elements=$element.find(settings.selector);return elements.length||(elements=$element),elements.each(function(){var element2=$(this),isRTL=$("body").hasClass("rtl"),selector="grid-slider-"+_.uniqid(),styleId=selector;if(element2.addClass(selector),selector="."+selector,isRTL&&(element2.attr("dir","rtl"),element2.data("rtl",!0)),iClass===void 0){var azInit=element2.find("> .slick-list > .slick-track");azInit.length?azInit.children().addClass("alo-item"):element2.children().addClass("alo-item");var iClass=".alo-item"}var options2=element2.data(),rows=(options2||{}).rows===void 0?1:options2.rows,classes=rows?selector+" "+iClass:selector+" .slick-track > "+iClass,padding=(options2||{}).padding===void 0?0:options2.padding,style=classes+"{padding: 0 "+padding+"px; box-sizing: border-box} "+selector+"{margin: 0 -"+padding+"px; }"+selector+".grid-init{visibility: visible; opacity: 1;}";if(style+=classes+"{float: left; min-height: 1px; min-width: 1px;}",style+=".rtl "+classes+"{float: right; min-height: 1px; min-width: 1px;}",style&&$head.append('<style type="text/css" >'+style+"</style>"),style="",options2.slidesToShow)if("IntersectionObserver"in window&&useIntersectionObserver){var nthChild=options2.slidesToShow+1;style+=selector+" .item:nth-child(n+ "+nthChild+"){display: none;} "+selector+" .item{float:left};";var gridSliderObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){var el=entry.target,$el=$(el);$el.on("init",function(){$head.find("#"+styleId).remove()}),_.sliderRender($el)}})});element2.each(function(index,el){var $el=$(el);$el.is(":visible")?gridSliderObserver.observe(el):_.sliderRender($el)})}else _.sliderRender(element2);if(options2.appendArrows||options2.appendDots){var wrapper=options2.wrapper?element2.find(options2.wrapper):element2.parent();options2.appendArrows&&element2.data("append-Arrows",wrapper.find(options2.appendArrows)),options2.appendDots&&element2.data("append-Dots",wrapper.find(options2.appendDots))}var responsive=_.getPesponsive(options2);if(responsive!=null){var length=Object.keys(responsive).length;$.each(responsive,function(key,value){var col=0,maxWith=0,minWith=0;if($.each(value,function(size,num){minWith=parseInt(size)+1,col=num}),key+2<length)$.each(responsive[key+1],function(size,num){maxWith=size,col=num}),style+=" @media (min-width: "+minWith+"px) and (max-width: "+maxWith+"px)";else{if(key+2==length)return;$.each(responsive[key],function(size,num){maxWith=size,col=num}),style+=" @media (min-width: "+maxWith+"px)"}var clearRtl=rows!=1?classes+":nth-child("+col+"n+1){clear: left}":" ";clearRtl+=rows!=1?".rtl "+classes+":nth-child("+col+"n+1){clear: right}":" ",style+=" {"+selector+"{margin: 0 -"+padding+"px}"+classes+"{padding: 0 "+padding+"px; box-sizing: border-box; width: calc(100% / "+col+")} "+clearRtl+"}"}),$head.append('<style type="text/css" id="'+styleId+'" >'+style+"</style>"),element2.addClass("grid-init")}}),this},_.getPesponsive=function(options2){if(options2.responsive){if(!options2.slidesToShow)return options2.responsive.reverse();var responsive=options2.responsive,length=Object.keys(responsive).length,gridResponsive=[];return $.each(responsive,function(key,value){var breakpoint={};breakpoint[value.breakpoint]=parseInt(value.settings.slidesToShow),gridResponsive.push(breakpoint)}),gridResponsive.reverse()}},_.sliderRender=function(el){if(el.hasClass("slick-initialized")){el.slick("refresh");return}var options2=el.data(),lazy=el.find("img.lazyload");lazy.length&&lazy.each(function(index){$(this).data("lazy",$(this).data("src"))}),el.on("init",function(event,slick){$("body").trigger("contentUpdated");var video=$(this).find(".external-video"),slide=slick.$slides.get(0);video.on("click",function(e){if(e.preventDefault(),!$this.hasClass("embed")){var $this=$(this),img=$this.find("img"),url=$(this).data("video");url=url.replace("://vimeo.com/","://player.vimeo.com/video/"),url=url.replace("://www.youtube.com/watch?v=","://youtube.com/embed/"),url=url+"?autoplay=1&badge=0";var iframe='<iframe class="iframe-video" src="'+url+'" width="'+img.width()+'" height="'+img.height()+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';$this.append(iframe).addClass("embed"),img.hide()}}),_.playVideo(slide)});var slider=el.slick(options2);el.on("beforeChange",function(event,slick,currentSlide,nextSlide){var video=$(this).find(".external-video"),nextSlide=slick.$slides.get(nextSlide);video.removeClass("embed").find("img").show(),video.find(".iframe-video").remove(),_.playVideo(nextSlide)}),slider.on("click",".item",function(){el.slick("slickSetOption","autoplay",!1,!1)})},_.playVideo=function(slide){var $slide=$(slide),video=$slide.find("video").not(".init"),videoPlay=$slide.find(".video-play");video.length&&videoPlay.length&&(video.addClass("init"),video=video.get(0),videoPlay.on("click",".btn-play",function(){video.paused?video.play():video.pause(),videoPlay.toggleClass("pause")}))},_.init()},$.fn.gridSlider=function(options){return this.each(function(){if($(this).data("gridSlider")==null){var plugin=new $.gridSlider(this,options);$(this).data("gridSlider",plugin)}})},!localStorage.getItem("touch")&&window.matchMedia("(max-width: 768px)").matches&&window.matchMedia("(pointer: coarse)").matches?document.body.addEventListener("touchstart",function(event){document.body.classList.contains("touch")||(localStorage.setItem("touch",!0),document.body.classList.add("touch"),$(".grid-slider").not(".exception").each(function(){$(this).gridSlider()}))}):window.addEventListener("load",function(){$(".grid-slider").not(".exception").each(function(){$(this).gridSlider()})}),$(document).on("contentUpdated",function(event){$(".grid-slider").not(".exception, .grid-init, .slick-initialized").each(function(){$(this).gridSlider()})}),$(document).on("Alothemes:SwitchRTL:reload",function(event){$(".grid-slider").not(".exception").each(function(){$("body").hasClass("rtl")?$(this).attr("dir","rtl").data("rtl",!0):$(this).attr("dir","ltr").data("rtl",!1),$(this).hasClass("slick-initialized")&&$(this).slick("unslick").slick($(this).data())})})})(jQuery);
//# sourceMappingURL=/cdn/shop/t/89/assets/grid-slider.js.map?v=180118782819071913541718795872
