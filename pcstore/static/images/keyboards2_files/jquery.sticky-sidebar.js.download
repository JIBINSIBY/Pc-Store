(function($){$.fn.StickySidebar=function(options){var defaults={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern"};options=$.extend(defaults,options),options.additionalMarginTop=parseInt(options.additionalMarginTop)||0,options.additionalMarginBottom=parseInt(options.additionalMarginBottom)||0,tryInitOrHookIntoEvents(options,this);function tryInitOrHookIntoEvents(options2,$that){var success=tryInit(options2,$that);success||(console.log("TST: Body width smaller than options.minWidth. Init is delayed."),$(document).scroll(function(options3,$that2){return function(evt){var success2=tryInit(options3,$that2);success2&&$(this).unbind(evt)}}(options2,$that)),$(window).resize(function(options3,$that2){return function(evt){var success2=tryInit(options3,$that2);success2&&$(this).unbind(evt)}}(options2,$that)))}function tryInit(options2,$that){return options2.initialized===!0?!0:$("body").width()<options2.minWidth?!1:(init(options2,$that),!0)}function init(options2,$that){options2.initialized=!0,$("head").append($('<style>.StickySidebar:after {content: ""; display: table; clear: both;}</style>')),$that.each(function(){var o={};o.sidebar=$(this),o.options=options2||{},o.container=$(o.options.containerSelector),o.container.length==0&&(o.container=o.sidebar.parent()),o.sidebar.parents().css("-webkit-transform","none"),o.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),o.stickySidebar=o.sidebar.find(".StickySidebar"),o.stickySidebar.length==0&&(o.sidebar.find("script").remove(),o.stickySidebar=$("<div>").addClass("StickySidebar").append(o.sidebar.children()),o.sidebar.append(o.stickySidebar)),o.marginTop=parseInt(o.sidebar.css("margin-top")),o.marginBottom=parseInt(o.sidebar.css("margin-bottom")),o.paddingTop=parseInt(o.sidebar.css("padding-top")),o.paddingBottom=parseInt(o.sidebar.css("padding-bottom"));var collapsedTopHeight=o.stickySidebar.offset().top,collapsedBottomHeight=o.stickySidebar.outerHeight();o.stickySidebar.css("padding-top",1),o.stickySidebar.css("padding-bottom",1),collapsedTopHeight-=o.stickySidebar.offset().top,collapsedBottomHeight=o.stickySidebar.outerHeight()-collapsedBottomHeight-collapsedTopHeight,collapsedTopHeight==0?(o.stickySidebar.css("padding-top",0),o.stickySidebarPaddingTop=0):o.stickySidebarPaddingTop=1,collapsedBottomHeight==0?(o.stickySidebar.css("padding-bottom",0),o.stickySidebarPaddingBottom=0):o.stickySidebarPaddingBottom=1,o.previousScrollTop=null,o.fixedScrollTop=0,resetSidebar(),o.onScroll=function(o2){if(o2.stickySidebar.is(":visible")){if($("body").width()<o2.options.minWidth){resetSidebar();return}if(o2.options.disableOnResponsiveLayouts){var sidebarWidth=o2.sidebar.outerWidth(o2.sidebar.css("float")=="none");if(sidebarWidth+50>o2.container.width()){resetSidebar();return}}var scrollTop=$(document).scrollTop(),position="static";if(scrollTop>=o2.container.offset().top+(o2.paddingTop+o2.marginTop-o2.options.additionalMarginTop)){var offsetTop=o2.paddingTop+o2.marginTop+options2.additionalMarginTop,offsetBottom=o2.paddingBottom+o2.marginBottom+options2.additionalMarginBottom,containerTop=o2.container.offset().top,containerBottom=o2.container.offset().top+getClearedHeight(o2.container),windowOffsetTop=0+options2.additionalMarginTop,windowOffsetBottom,sidebarSmallerThanWindow=o2.stickySidebar.outerHeight()+offsetTop+offsetBottom<$(window).height();sidebarSmallerThanWindow?windowOffsetBottom=windowOffsetTop+o2.stickySidebar.outerHeight():windowOffsetBottom=$(window).height()-o2.marginBottom-o2.paddingBottom-options2.additionalMarginBottom;var staticLimitTop=containerTop-scrollTop+o2.paddingTop+o2.marginTop,staticLimitBottom=containerBottom-scrollTop-o2.paddingBottom-o2.marginBottom,top=o2.stickySidebar.offset().top-scrollTop,scrollTopDiff=o2.previousScrollTop-scrollTop;o2.stickySidebar.css("position")=="fixed"&&o2.options.sidebarBehavior=="modern"&&(top+=scrollTopDiff),o2.options.sidebarBehavior=="stick-to-top"&&(top=options2.additionalMarginTop),o2.options.sidebarBehavior=="stick-to-bottom"&&(top=windowOffsetBottom-o2.stickySidebar.outerHeight()),scrollTopDiff>0?top=Math.min(top,windowOffsetTop):top=Math.max(top,windowOffsetBottom-o2.stickySidebar.outerHeight()),top=Math.max(top,staticLimitTop),top=Math.min(top,staticLimitBottom-o2.stickySidebar.outerHeight());var sidebarSameHeightAsContainer=o2.container.height()==o2.stickySidebar.outerHeight();!sidebarSameHeightAsContainer&&top==windowOffsetTop||!sidebarSameHeightAsContainer&&top==windowOffsetBottom-o2.stickySidebar.outerHeight()?position="fixed":scrollTop+top-o2.sidebar.offset().top-o2.paddingTop<=options2.additionalMarginTop?position="static":position="absolute"}if(position=="fixed")o2.stickySidebar.css({position:"fixed",width:o2.sidebar.width(),top:top,left:o2.sidebar.offset().left+parseInt(o2.sidebar.css("padding-left"))});else if(position=="absolute"){var css={};o2.stickySidebar.css("position")!="absolute"&&(css.position="absolute",css.top=scrollTop+top-o2.sidebar.offset().top-o2.stickySidebarPaddingTop-o2.stickySidebarPaddingBottom),css.width=o2.sidebar.width(),css.left="",o2.stickySidebar.css(css)}else position=="static"&&resetSidebar();position!="static"&&o2.options.updateSidebarHeight==!0&&o2.sidebar.css({"min-height":o2.stickySidebar.outerHeight()+o2.stickySidebar.offset().top-o2.sidebar.offset().top+o2.paddingBottom}),o2.previousScrollTop=scrollTop}},o.onScroll(o),$(document).scroll(function(o2){return function(){o2.onScroll(o2)}}(o)),$(window).resize(function(o2){return function(){o2.stickySidebar.css({position:"static"}),o2.onScroll(o2)}}(o));function resetSidebar(){o.fixedScrollTop=0,o.sidebar.css({"min-height":"1px"}),o.stickySidebar.css({position:"static",width:""})}function getClearedHeight(e){var height=e.height();return e.children().each(function(){height=Math.max(height,$(this).height())}),height}})}}})(jQuery);
//# sourceMappingURL=/cdn/shop/t/89/assets/jquery.sticky-sidebar.js.map?v=17284366095230779641718795888
