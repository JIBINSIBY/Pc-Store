{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <title>Hexashop Ecommerce HTML CSS Template</title>


    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">

    <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.css' %}">

    <link rel="stylesheet" href="{% static 'css/templatemo-hexashop.css' %}">

    <link rel="stylesheet" href="{% static 'css/owl-carousel.css' %}">

    <link rel="stylesheet" href="{% static 'css/lightbox.css' %}">
<!--

TemplateMo 571 Hexashop

https://templatemo.com/tm-571-hexashop

--><script>
   
</script>

    <style>
        .search-container {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        .search-container form {
            display: flex;
            align-items: center;
        }
        .search-container input[type="text"] {
            padding: 10px;
            border: none;
            border-radius: 5px 0 0 5px;
            outline: none;
        }
        .search-container button {
            padding: 10px 15px;
            background-color: #7e96dc;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        .search-container button:hover {
            background-color: #d32f2f;
        }
        .d-flex{
            display: flex;
            align-items: center;
            margin-left: 87px;
            margin-top: 34px;
        }
        #cart {
            padding: 50px 0;
        }
        .cart-item {
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
        }
        .cart-item img {
            max-width: 100%;
        }
        .quantity {
            display: flex;
            align-items: center;
        }
        .quantity input {
            width: 50px;
            text-align: center;
        }
        .minus-btn, .plus-btn {
            padding: 5px 10px;
            background-color: #f1f1f1;
            border: none;
            cursor: pointer;
        }
        .remove-btn {
            background-color: #ff4444;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        .cart-summary {
            background-color: #f9f9f9;
            padding: 20px;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .total {
            font-weight: bold;
        }
        .savings {
            color: green;
        }
        .place-order-btn {
            background-color: #ff9f00;
            color: white;
            border: none;
            padding: 10px 20px;
            width: 100%;
            cursor: pointer;
        }
        .custom-alert {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .alert-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 90%;
        }
        .alert-content p {
            margin-bottom: 20px;
            font-size: 18px;
            color: #333;
        }
        .alert-content button {
            margin: 10px;
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        #confirmRemove {
            background-color: #ff4444;
            color: white;
        }
        #confirmRemove:hover {
            background-color: #ff6666;
        }
        #cancelRemove {
            background-color: #f1f1f1;
            color: #333;
        }
        #cancelRemove:hover {
            background-color: #e0e0e0;
        }
    </style>

    </head>
    
    <body>
    
    <!-- ***** Preloader Start ***** -->
    <!-- <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>   -->
    <!-- ***** Preloader End ***** -->
    
    
    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class=" mx-5">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            <img src="{% static 'images/logo.png' %}">
                        </a>
                        <!-- ***** Logo End ***** -->
                        
                        <!-- ***** Search Start ***** -->
                        <!-- <div class="search-container ">
                            <form action="search_results" method="get" class="d-flex">
                                <input type="text" placeholder="Search products..." name="q">
                                <button type="submit"><i class="fa fa-search"></i></button>
                            </form>
                        </div> -->
                        <!-- ***** Search End ***** -->

                        <!-- ***** Menu Start ***** -->
                        <ul class="nav" style="margin-top: -43px;">
                            <li class="scroll-to-section"><a href="{% url 'userapp:mainpage' %}" >Home</a></li>
                            <li class="scroll-to-section"><a href="">About Us</a></li>
                            <li class="scroll-to-section"><a href="{% url 'userapp:cart_view' %}" class="active">Cart</a></li>
                            <li class="scroll-to-section"><a href="{% url 'userapp:pc_custom' %}">Custom PC</a></li>
                            <li class="submenu">
                                <a href="javascript:;">Products</a>
                                <ul>
                                    <li><a href="{% url 'userapp:monitors' %}">Monitors</a></li>
                                    <li><a href="{% url 'userapp:keyboards' %}">Keyboards</a></li>
                                    <li><a href="{% url 'userapp:mouses' %}">Mouses</a></li>
                                    <li><a href="{% url 'userapp:assembledcpus' %}">Assembled CPU</a></li>
                                    <li><a href="{% url 'userapp:accessories' %}">Accessories</a></li>
                                </ul>
                            </li>
                            {% if user.is_authenticated %}
                            <li class="submenu">
                                <a href="javascript:;">{{ user.username }}</a>
                                <ul>
                                    <li><a href="{% url 'userapp:logout' %}">Logout</a></li>
                                    {% else %}
                            <li><a href="{% url 'userapp:login' %}">Login</a></li>
                            {% endif %}
                            <li><a href="{% url 'userapp:profile' %}">Profile</a></li>
                            <li><a href="#">Features Page 3</a></li>
                            <li><a rel="nofollow" href="https://templatemo.com/page/4" target="_blank">Template Page 4</a></li>
                                </ul>
                            </li>
                            
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->
<br>
<br>
    <!-- ***** Cart Area Starts ***** -->
    <section class="section" id="cart">
        <div class="container">
            {% if cart_items %}
                <div class="row">
                    <div class="col-lg-8">
                        <div class="cart-items">
                            {% for item in cart_items %}
                            <div class="cart-item" data-item-id="{{ item.cartId }}">
                                <div class="row">
                                    <div class="col-lg-3">
                                        <img src="{{ item.product.main_image.url }}" alt="{{ item.product.name }}">
                                    </div>
                                    <div class="col-lg-6">
                                        <h4>{{ item.product.name }}</h4>
                                        <p>{{ item.product.description|truncatewords:20 }}</p>
                                        <div class="quantity">
                                            <button class="minus-btn" onclick="updateQuantity({{ item.cartId }}, -1)">-</button>
                                            <input type="number" value="{{ item.quantity }}" min="1" id="quantity-{{ item.cartId }}" readonly>
                                            <button class="plus-btn" onclick="updateQuantity({{ item.cartId }}, 1)">+</button>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <p class="price">₹<span id="price-{{ item.cartId }}">{{ item.totalPrice }}</span></p>
                                        <button class="remove-btn" onclick="showCustomAlert({{ item.cartId }})">REMOVE</button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="cart-summary">
                            <h3>PRICE DETAILS</h3>
                            <div class="summary-item">
                                <span>Price ({{ cart_items|length }} items)</span>
                                <span>₹{{ total_price }}</span>
                            </div>
                            <div class="summary-item">
                                <span>Discount</span>
                                <span>- ₹{{ total_discount }}</span>
                            </div>
                            <div class="summary-item">
                                <span>Delivery Charges</span>
                                <span>₹{{ delivery_charges }}</span>
                            </div>
                            <div class="summary-item total">
                                <span>Total Amount</span>
                                <span>₹{{ total_amount }}</span>
                            </div>
                            <p class="savings">You will save ₹{{ total_savings }} on this order</p>
                            <button class="place-order-btn">PLACE ORDER</button>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="row">
                    <div class="col-12 text-center">
                        <img src="{% static 'images/cart3.png' %}" alt="Empty Cart" style="max-width: 200px;">
                        <h2>Your cart is empty!</h2>
                        <p>Explore our wide selection and find something you like</p>
                        <a href="{% url 'userapp:mainpage' %}" class="btn btn-primary mt-3">Continue Shopping</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </section>
    <!-- ***** Cart Area Ends ***** -->

    <!-- ***** Explore Area Starts ***** -->
    <section class="section" id="explore">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="left-content">
                        <h2>Explore Our Products</h2>
                        <span>You are allowed to use this HexaShop HTML CSS template. You can feel free to modify or edit this layout. You can convert this template as any kind of ecommerce CMS theme as you wish.</span>
                        <div class="quote">
                            <i class="fa fa-quote-left"></i><p>You are not allowed to redistribute this template ZIP file on any other website.</p>
                        </div>
                        <p>There are 5 pages included in this HexaShop Template and we are providing it to you for absolutely free of charge at our TemplateMo website. There are web development costs for us.</p>
                        <p>If this template is beneficial for your website or business, please kindly <a rel="nofollow" href="https://paypal.me/templatemo" target="_blank">support us</a> a little via PayPal. Please also tell your friends about our great website. Thank you.</p>
                        <div class="main-border-button">
                            <a href="products.html">Discover More</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="right-content">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="leather">
                                    <h4>Leather Bags</h4>
                                    <span>Latest Collection</span>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="first-image">
                                    <img src="{% static 'images/explore-image-01.jpg' %}" alt="">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="second-image">
                                    <img src="{% static 'images/explore-image-02.jpg' %}" alt="">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="types">
                                    <h4>Different Types</h4>
                                    <span>Over 304 Products</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ***** Explore Area Ends ***** -->

    <!-- ***** Social Area Starts ***** -->
    <section class="section" id="social">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-heading">
                        <h2>Social Media</h2>
                        <span>Details to details is what makes Hexashop different from the other themes.</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row images">
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>Fashion</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-01.jpg' %}" alt="">
                    </div>
                </div>
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>New</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-02.jpg' %}" alt="">
                    </div>
                </div>
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>Brand</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-03.jpg' %}" alt="">
                    </div>
                </div>
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>Makeup</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-04.jpg' %}" alt="">
                    </div>
                </div>
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>Leather</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-05.jpg' %}" alt="">
                    </div>
                </div>
                <div class="col-2">
                    <div class="thumb">
                        <div class="icon">
                            <a href="http://instagram.com">
                                <h6>Bag</h6>
                                <i class="fa fa-instagram"></i>
                            </a>
                        </div>
                        <img src="{% static 'images/instagram-06.jpg' %}" alt="">
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ***** Social Area Ends ***** -->

    <!-- ***** Subscribe Area Starts ***** -->
    <div class="subscribe">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="section-heading">
                        <h2>By Subscribing To Our Newsletter You Can Get 30% Off</h2>
                        <span>Details to details is what makes Hexashop different from the other themes.</span>
                    </div>
                    <form id="subscribe" action="" method="get">
                        <div class="row">
                          <div class="col-lg-5">
                            <fieldset>
                              <input name="name" type="text" id="name" placeholder="Your Name" required="">
                            </fieldset>
                          </div>
                          <div class="col-lg-5">
                            <fieldset>
                              <input name="email" type="text" id="email" pattern="[^ @]*@[^ @]*" placeholder="Your Email Address" required="">
                            </fieldset>
                          </div>
                          <div class="col-lg-2">
                            <fieldset>
                              <button type="submit" id="form-submit" class="main-dark-button"><i class="fa fa-paper-plane"></i></button>
                            </fieldset>
                          </div>
                        </div>
                    </form>
                </div>
                <div class="col-lg-4">
                    <div class="row">
                        <div class="col-6">
                            <ul>
                                <li>Store Location:<br><span>Sunny Isles Beach, FL 33160, United States</span></li>
                                <li>Phone:<br><span>010-020-0340</span></li>
                                <li>Office Location:<br><span>North Miami Beach</span></li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <ul>
                                <li>Work Hours:<br><span>07:30 AM - 9:30 PM Daily</span></li>
                                <li>Email:<br><span>info@company.com</span></li>
                                <li>Social Media:<br><span><a href="#">Facebook</a>, <a href="#">Instagram</a>, <a href="#">Behance</a>, <a href="#">Linkedin</a></span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ***** Subscribe Area Ends ***** -->
    
    <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="first-item">
                        <div class="logo">
                            <img src="{% static 'images/white-logo.png' %}" alt="hexashop ecommerce templatemo">
                        </div>
                        <ul>
                            <li><a href="#">16501 Collins Ave, Sunny Isles Beach, FL 33160, United States</a></li>
                            <li><a href="#">hexashop@company.com</a></li>
                            <li><a href="#">010-020-0340</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <h4>Shopping &amp; Categories</h4>
                    <ul>
                        <li><a href="#">Men's Shopping</a></li>
                        <li><a href="#">Women's Shopping</a></li>
                        <li><a href="#">Kid's Shopping</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Homepage</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Help &amp; Information</h4>
                    <ul>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">FAQ's</a></li>
                        <li><a href="#">Shipping</a></li>
                        <li><a href="#">Tracking ID</a></li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    <div class="under-footer">
                        <p>Copyright © 2022 HexaShop Co., Ltd. All Rights Reserved. 
                        
                        <br>Design: <a href="https://templatemo.com" target="_parent" title="free css templates">TemplateMo</a></p>
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fa fa-behance"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    

    <!-- jQuery -->
    <script src="{% static 'js/jquery-2.1.0.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{% static 'js/popper.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <!-- Plugins -->
    <script src="{% static 'js/owl-carousel.js' %}"></script>
    <script src="{% static 'js/accordions.js' %}"></script>
    <script src="{% static 'js/datepicker.js' %}"></script>
    <script src="{% static 'js/scrollreveal.min.js' %}"></script>
    <script src="{% static 'js/waypoints.min.js' %}"></script>
    <script src="{% static 'js/jquery.counterup.min.js' %}"></script>
    <script src="{% static 'js/imgfix.min.js' %}"></script> 
    <script src="{% static 'js/slick.js' %}"></script> 
    <script src="{% static 'js/lightbox.js' %}"></script> 
    <script src="{% static 'js/isotope.js' %}"></script> 
    
    <!-- Global Init -->
    <script src="{% static 'js/custom.js' %}"></script>

    <script>

        $(function() {
            var selectedClass = "";
            $("p").click(function(){
            selectedClass = $(this).attr("data-rel");
            $("#portfolio").fadeTo(50, 0.1);
                $("#portfolio div").not("."+selectedClass).fadeOut();
            setTimeout(function() {
              $("."+selectedClass).fadeIn();
              $("#portfolio").fadeTo(50, 1);
            }, 500);
                
            });
        });

    </script>

    <script>
    function updateQuantity(itemId, change) {
        const quantityInput = document.getElementById(`quantity-${itemId}`);
        let newQuantity = parseInt(quantityInput.value) + change;
        if (newQuantity < 1) newQuantity = 1;
        
        fetch(`/update-cart-item/${itemId}/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify({quantity: newQuantity})
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload(); // This will reload the page
            } else if (data.error === 'insufficient_stock') {
                alert(`Sorry, only ${data.available_stock} items are available in stock.`);
                quantityInput.value = data.available_stock;
                location.reload(); // Reload even in case of insufficient stock
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while updating the quantity.');
        });
    }

    function showCustomAlert(itemId) {
        document.getElementById('customAlert').style.display = 'flex';
        document.getElementById('confirmRemove').onclick = function() {
            removeItem(itemId);
            document.getElementById('customAlert').style.display = 'none';
        };
        document.getElementById('cancelRemove').onclick = function() {
            document.getElementById('customAlert').style.display = 'none';
        };
    }

    function removeItem(itemId) {
        fetch(`/remove-cart-item/${itemId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload(); // This will reload the page
            } else {
                alert('Failed to remove the product from your cart.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while removing the product from your cart.');
        });
    }

    function updateCartSummary(total, itemCount, discount, deliveryCharges, totalAmount) {
        document.querySelector('.summary-item:nth-child(1) span:last-child').textContent = `₹${total}`;
        document.querySelector('.summary-item:nth-child(1) span:first-child').textContent = `Price (${itemCount} items)`;
        document.querySelector('.summary-item:nth-child(2) span:last-child').textContent = `- ₹${discount}`;
        document.querySelector('.summary-item:nth-child(3) span:last-child').textContent = `₹${deliveryCharges}`;
        document.querySelector('.summary-item:nth-child(4) span:last-child').textContent = `₹${totalAmount}`;
        document.querySelector('.savings').textContent = `You will save ₹${discount} on this order`;
    }
    </script>

    <div id="customAlert" class="custom-alert" style="display: none;">
        <div class="alert-content">
            <p>Are you sure you want to remove this item from your cart?</p>
            <button id="confirmRemove">Yes, Remove</button>
            <button id="cancelRemove">Cancel</button>
        </div>
    </div>

  </body>
</html>